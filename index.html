<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FlareLink</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  * { box-sizing:border-box; margin:0; padding:0; }
  body,html { font-family:'Inter',sans-serif; background:#0a0a0f; color:#eee; height:100%; overflow:hidden; }
  #particles-js { position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:0; pointer-events:none; }
  #app { display:flex; height:100vh; width:100vw; }
  nav { width:72px; background: rgba(20,18,34,0.8); display:flex; flex-direction:column; align-items:center; padding:1rem 0; border-right:1px solid #2c2a42; backdrop-filter: blur(15px); z-index:10; }
  nav img.logo { width:36px; height:36px; margin-bottom:1rem; border-radius:8px; cursor:default; user-select:none; }
  main { flex:1; position:relative; display:flex; flex-direction:column; align-items:center; padding:1.5rem 2rem; overflow:auto; z-index:1; }
  .search-bar { position:fixed; top:1rem; left:50%; transform:translateX(-50%); width:min(95vw,480px); background: rgba(30,25,50,0.4); border-radius:9999px; border:1px solid #6b21a8; display:flex; align-items:center; padding:0.5rem 1rem; gap:0.75rem; color:#ccc; z-index:15; }
  .search-bar:focus-within { border-color:#a78bfa; color:#eee; }
  .search-bar input { flex:1; background:transparent; border:none; color:#eee; outline:none; font-weight:500; font-size:1rem; }
  .search-bar button { background:transparent; border:none; color:#ccc; cursor:pointer; font-size:1.15rem; }
  .search-bar button:hover { color:#a78bfa; }
  .cards-grid { margin-top:5rem; display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:1rem; width:100%; max-width:960px; }
  .card { background: rgba(255 255 255 / 0.05); border-radius:1rem; padding:1rem; box-shadow:0 0 8px rgb(135 85 239 / 0.3); backdrop-filter: blur(12px); cursor:pointer; display:flex; flex-direction:column; align-items:center; justify-content:center; transition:0.3s; }
  .card:hover { background: rgba(255 255 255 / 0.15); box-shadow:0 0 15px #8b5cf6aa; }
  .card img { width:48px; height:48px; margin-bottom:0.6rem; border-radius:12px; background:#222; object-fit:contain; filter: drop-shadow(0 0 4px #7c3aedaa); }
  .card .label { font-weight:600; font-size:1rem; text-align:center; color:#ddd; }
  .iframe-overlay { position:fixed; inset:0; background:rgba(10,10,15,0.97); backdrop-filter: blur(18px); display:flex; flex-direction:column; z-index:50; display:none; }
  .iframe-header { height:48px; background: rgba(30,20,50,0.8); backdrop-filter: blur(20px); display:flex; align-items:center; padding:0 1rem; gap:0.75rem; user-select:none; }
  .iframe-header button { border:none; background: rgba(255 255 255 / 0.1); border-radius:8px; width:36px; height:36px; cursor:pointer; color:#ddd; font-size:1.2rem; transition:0.25s; }
  .iframe-header button:hover { background: rgba(255 255 255 / 0.25); }
  .iframe-header .title { flex:1; color:#ccc; font-weight:600; font-size:1rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  iframe { flex:1; border:none; width:100%; background:#0a0a0f; }
</style>
</head>
<body>
<div id="particles-js"></div>
<div id="app">
  <nav aria-label="Sidebar">
    <img src="https://storage.googleapis.com/a1aa/image/53f27051-c4bf-41e5-eab6-ee4e83df519e.jpg" alt="Logo" class="logo" draggable="false" />
  </nav>
  <main>
    <div class="search-bar">
      <input type="text" placeholder="Search FlareLink..." id="search-input" autocomplete="off">
      <button id="search-btn">üîç</button>
    </div>
    <div class="cards-grid" id="cards-container"></div>
  </main>
</div>
<div class="iframe-overlay" id="iframe-overlay">
  <div class="iframe-header">
    <button id="refresh-btn">üîÑ</button>
    <button id="close-btn">‚ùå</button>
    <div class="title" id="iframe-title"></div>
  </div>
  <iframe id="iframe"></iframe>
</div>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
(() => {
  const services = [
    {id:'xen', label:'Xen OS', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','stayinschooleducation.org','studentvue.my']},
    {id:'nb', label:'Nebula', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','stayinschooleducation.org','studentvue.my']},
    {id:'tb', label:'Terbium OS', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','stayinschooleducation.org','studentvue.my']},
    {id:'ddx', label:'DaydreamX', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','stayinschooleducation.org','studentvue.my']},
    {id:'lunar', label:'Lunar', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','stayinschooleducation.org','studentvue.my']},
    {id:'space', label:'Space', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','stayinschooleducation.org','studentvue.my']},
    {id:'prodigy', label:'Prodigy', domains:['prodigy.it.com']},
    {id:'chatgpt', label:'ChatGPT', domains:['chat.openai.com']}
  ];

  const cardsContainer = document.getElementById('cards-container');
  const iframeOverlay = document.getElementById('iframe-overlay');
  const iframe = document.getElementById('iframe');
  const iframeTitle = document.getElementById('iframe-title');
  const closeBtn = document.getElementById('close-btn');
  const refreshBtn = document.getElementById('refresh-btn');
  let currentService = null;
  let currentUrl = '';

  function randomString(len=5){const chars='abcdefghijklmnopqrstuvwxyz0123456789';let str='';for(let i=0;i<len;i++)str+=chars.charAt(Math.floor(Math.random()*chars.length));return str;}

  function generateUrl(service){
    if(service.id==='prodigy'||service.id==='chatgpt') return `https://${service.domains[0]}`;
    const domain = service.domains[Math.floor(Math.random()*service.domains.length)];
    return `https://${service.id}.${randomString(6)}.${domain}.cdn.cloudflare.net`;
  }

  services.forEach(s=>{
    const card=document.createElement('div');
    card.className='card';
    card.innerHTML=`<img src="https://www.google.com/s2/favicons?sz=64&domain=${s.domains[0]}" alt=""><div class="label">${s.label}</div>`;
    card.onclick=()=>{
      currentService=s;
      currentUrl=generateUrl(s);
      iframe.src=currentUrl;
      iframeTitle.textContent=s.label;
      iframeOverlay.style.display='flex';
    };
    cardsContainer.appendChild(card);
  });

  closeBtn.onclick=()=>{iframeOverlay.style.display='none'; iframe.src=''; currentService=null;};
  refreshBtn.onclick=()=>{if(currentService){currentUrl=generateUrl(currentService); iframe.src=currentUrl;}};

  document.getElementById('search-input').addEventListener('input',e=>{
    const filter=e.target.value.toLowerCase();
    [...cardsContainer.children].forEach(c=>{
      c.style.display=c.querySelector('.label').textContent.toLowerCase().includes(filter)?'':'none';
    });
  });

  // Particles optimized for performance
  particlesJS('particles-js',{
    particles:{number:{value:35},color:{value:"#8b5cf6"},shape:{type:"circle"},opacity:{value:0.3,random:true},size:{value:3,random:true},move:{enable:true,speed:1.2,random:true}},
    interactivity:{detect_on:"canvas",events:{onhover:{enable:false},onclick:{enable:false}}},retina_detect:true
  });
})();
</script>
</body>
</html>
