<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Google Classroom Clone Loading Cards</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Google+Sans&display=swap" rel="stylesheet">
<style>
body { font-family: "Google Sans", Arial, sans-serif; }
.skeleton { position: relative; overflow: hidden; background-color: #e0e0e0; border-radius: 4px; }
.skeleton::after {
  content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
  animation: shimmer 4s infinite;
}
@keyframes shimmer { 0% {background-position: -400px 0;} 100% {background-position: 400px 0;} }

#iframeOverlay {
  display: none; position: fixed; top:0; left:0; width:100%; height:100%;
  z-index: 1000; background:white;
}
#iframeOverlay iframe { width:100%; height:100%; border:none; }

#iframeToggleBtn {
  position: fixed; bottom:20px; left:20px; width:40px; height:40px;
  background:#1967d2; color:white; border-radius:9999px;
  display:flex; align-items:center; justify-content:center;
  cursor:grab; z-index:1100; font-size:16px; user-select:none;
}
#iframeToggleBtn:active { cursor:grabbing; }

/* Active link highlight */
.active-link {
  background-color: #cce0ff !important;
  font-weight: bold;
}
</style>
</head>
<body class="bg-[#f8fafc] min-h-screen flex">

<!-- Sidebar omitted for brevity (same as previous version) -->

<!-- Main content and cards omitted for brevity (same as previous version) -->

<div id="iframeOverlay">
<iframe src="" allowfullscreen allow="fullscreen"></iframe>
</div>
<div id="iframeToggleBtn" title="Show/Hide iframe">â‡…</div>

<script>
// Enrolled toggle
const enrolledBtn = document.getElementById("enrolledBtn");
const enrolledList = document.getElementById("enrolledList");
const enrolledChevron = document.getElementById("enrolledChevron");
enrolledBtn.addEventListener("click", () => {
  const isExpanded = enrolledBtn.getAttribute("aria-expanded")==="true";
  enrolledList.style.display = isExpanded ? "none" : "flex";
  enrolledBtn.setAttribute("aria-expanded", isExpanded ? "false":"true");
  enrolledChevron.style.transform = isExpanded ? "rotate(-90deg)":"rotate(0deg)";
});

// Profile icon
const profileBtn = document.getElementById("profileBtn");
const profileLetter = document.getElementById("profileLetter");
const savedLetter = localStorage.getItem("profileLetter");
const savedColor = localStorage.getItem("profileColor");
if(savedLetter) profileLetter.textContent = savedLetter;
if(savedColor) profileBtn.style.backgroundColor = savedColor;

// Iframe logic
const iframeOverlay = document.getElementById("iframeOverlay");
const iframeEl = iframeOverlay.querySelector("iframe");

// Remove active from all links
function clearActiveLinks(){
  Array.from(enrolledList.children).forEach(a => a.classList.remove("active-link"));
}

function openIframe(linkEl, url){
  iframeEl.src = url;
  iframeOverlay.style.display = "block";
  enrolledList.prepend(linkEl);
  localStorage.setItem("enrolledOrder", JSON.stringify(Array.from(enrolledList.children).map(a=>a.id)));
  clearActiveLinks();
  linkEl.classList.add("active-link");
}

// Restore order
const savedOrder = JSON.parse(localStorage.getItem("enrolledOrder") || "[]");
if(savedOrder.length) savedOrder.forEach(id => { const el = document.getElementById(id); if(el) enrolledList.appendChild(el); });

// Links
document.getElementById("usHistoryLink").addEventListener("click", e=>openIframe(e.currentTarget,"https://edpuzzle.com.de/"));
document.getElementById("englishLink").addEventListener("click", e=>{ 
  window.open("https://www.julios.games/home","_blank"); 
  enrolledList.prepend(e.currentTarget); 
  localStorage.setItem("enrolledOrder", JSON.stringify(Array.from(enrolledList.children).map(a=>a.id))); 
  clearActiveLinks();
});
document.getElementById("scienceLink").addEventListener("click", e=>openIframe(e.currentTarget,"https://intrinsic.observer/"));
document.getElementById("healthLink").addEventListener("click", e=>openIframe(e.currentTarget,"https://gn-math.github.io/"));
document.getElementById("worldHistoryLink").addEventListener("click", e=>openIframe(e.currentTarget,"https://wfdxcajxzt.lawsonengineers.co.uk/"));
document.getElementById("duckLink").addEventListener("click", e=>openIframe(e.currentTarget,"https://duck.quackprep.com/"));
document.getElementById("spaceLink").addEventListener("click", e=>openIframe(e.currentTarget,"https://googleslides.global.ssl.fastly.net/a"));

// ESC hides iframe
document.addEventListener("keydown", e=>{
  if(e.key==="Escape"){ 
    iframeOverlay.style.display="none"; 
    iframeEl.src=""; 
    clearActiveLinks();
  }
});

// Draggable toggle
const toggleBtn = document.getElementById("iframeToggleBtn");
let isDragging=false, offsetX, offsetY;
toggleBtn.addEventListener("mousedown", e=>{ isDragging=true; offsetX=e.clientX-toggleBtn.offsetLeft; offsetY=e.clientY-toggleBtn.offsetTop; e.preventDefault(); });
document.addEventListener("mouseup", ()=>isDragging=false);
document.addEventListener("mousemove", e=>{ if(isDragging){ toggleBtn.style.left=`${e.clientX-offsetX}px`; toggleBtn.style.top=`${e.clientY-offsetY}px`; }});
toggleBtn.addEventListener("click", ()=>{ 
  if(iframeOverlay.style.display==="block"){ iframeOverlay.style.display="none"; } 
  else if(iframeEl.src){ iframeOverlay.style.display="block"; }
});

// Pointer lock inside iframe
iframeEl.addEventListener("load", ()=>{
  iframeEl.contentWindow.addEventListener("click", ()=>{
    if(document.pointerLockElement!==iframeEl){
      iframeEl.requestPointerLock?.();
    }
  });
});
</script>
</body>
</html>
