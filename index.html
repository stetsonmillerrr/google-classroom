<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FlareLink - Infinite Unblocked Links</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com" defer></script>
<style>
html, body { margin:0; padding:0; height:100%; font-family:'Inter',sans-serif; background:#0a0a0f; color:#eee; overflow:hidden; }
#app { display:flex; height:100vh; width:100vw; }
nav { background:rgba(20,18,34,0.8); width:72px; flex-shrink:0; display:flex; flex-direction:column; align-items:center; padding:1rem 0; border-right:1px solid #2c2a42; backdrop-filter:blur(15px); z-index:10; }
nav img.logo { width:36px; height:36px; margin-bottom:1rem; border-radius:8px; user-select:none; }
main { flex:1; display:flex; flex-direction:column; align-items:center; padding:1.5rem 2rem; overflow:hidden; position:relative; }
.search-bar { position:fixed; top:1rem; left:50%; transform:translateX(-50%); width:min(95vw,480px); background:rgba(30,25,50,0.4); backdrop-filter:blur(14px); border-radius:9999px; border:1px solid #6b21a8; display:flex; align-items:center; padding:0.5rem 1rem; gap:0.75rem; color:#ccc; font-size:1rem; z-index:15; transition:border-color 0.3s; }
.search-bar:focus-within { border-color:#a78bfa; color:#eee; }
.search-bar input { flex:1; background:transparent; border:none; outline:none; color:#eee; font-weight:500; }
.search-bar button { background:transparent; border:none; cursor:pointer; font-size:1.15rem; color:#ccc; transition:color 0.2s; }
.search-bar button:hover { color:#a78bfa; }
.cards-grid { margin-top:5rem; display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:1.25rem; width:100%; max-width:960px; z-index:12; }
.card { background:rgba(255 255 255 / 0.05); border-radius:1rem; padding:1.25rem; display:flex; flex-direction:column; align-items:center; cursor:pointer; user-select:none; transition:0.3s; }
.card:hover { background:rgba(255 255 255 / 0.15); }
.card .favicon { width:56px; height:56px; margin-bottom:0.8rem; border-radius:14px; object-fit:contain; filter:drop-shadow(0 0 4px #7c3aedaa); }
.card .label { font-weight:600; font-size:1.1rem; text-align:center; color:#ddd; }
.iframe-overlay { position:fixed; inset:0; background:rgba(10,10,15,0.98); display:flex; flex-direction:column; z-index:50; backdrop-filter:blur(18px); }
.iframe-header { height:48px; display:flex; align-items:center; padding:0 1rem; gap:0.75rem; background:rgba(30,20,50,0.8); backdrop-filter:blur(20px); }
.iframe-header button { width:36px; height:36px; border-radius:8px; border:none; background:rgba(255 255 255 / 0.1); cursor:pointer; color:#ddd; display:flex; align-items:center; justify-content:center; transition:0.25s; }
.iframe-header button:hover { background:rgba(255 255 255 / 0.25); }
.iframe-header .title { flex:1; color:#ccc; font-weight:600; font-size:1.1rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
iframe { flex:1; border:none; width:100%; background:#0a0a0f; }
#particles-js { position:fixed; inset:0; z-index:1; pointer-events:none; }
::-webkit-scrollbar { display:none; } scrollbar-width:none;
</style>
</head>
<body>
<div id="particles-js"></div>
<div id="app">
  <nav aria-label="Sidebar">
    <img src="https://storage.googleapis.com/a1aa/image/53f27051-c4bf-41e5-eab6-ee4e83df519e.jpg" alt="Logo" class="logo" draggable="false">
  </nav>
  <main>
    <div class="search-bar" role="search">
      <input type="text" placeholder="Search FlareLink..." aria-label="Search FlareLink" id="search-input" autocomplete="off" spellcheck="false">
      <button aria-label="Search" id="search-btn">üîç</button>
    </div>
    <div class="cards-grid" id="cards-container" aria-live="polite" aria-relevant="additions removals"></div>
  </main>
</div>
<div class="iframe-overlay" id="iframe-overlay" hidden>
  <div class="iframe-header">
    <button id="close-btn" aria-label="Close iframe">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
      </svg>
    </button>
    <button id="refresh-btn" aria-label="Refresh iframe">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 1 .908-.418A6 6 0 1 1 8 2v1z"/>
        <path d="M8 0a.5.5 0 0 1 .5.5V4a.5.5 0 0 1-1 0V.5A.5.5 0 0 1 8 0z"/>
      </svg>
    </button>
    <div class="title" id="iframe-title" title=""></div>
  </div>
  <iframe id="iframe" allowfullscreen sandbox="allow-scripts allow-same-origin allow-forms allow-pointer-lock"></iframe>
</div>

<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js" defer></script>
<script defer>
(() => {
const cardsData=[
  {id:'space', label:'Space', wildcard:'*.space', domains:['blocksi.lol','deltamath.icu','desmosgraphing.xyz','desmos.lol','edpuzzle.icu','goguardian.pro','googledrive.icu','nearpod.lol','prodigy.it.com','stayinschooleducation.org','studentvue.my']},
  {id:'chatgpt', label:'ChatGPT', wildcard:'', domains:['chat.openai.com']}
];
const STORAGE_KEY='flarelink-recent-order';
const cardsContainer=document.getElementById('cards-container');
const iframeOverlay=document.getElementById('iframe-overlay');
const iframe=document.getElementById('iframe');
const iframeTitle=document.getElementById('iframe-title');
const closeBtn=document.getElementById('close-btn');
const refreshBtn=document.getElementById('refresh-btn');
let currentCard=null, currentIframeUrl='';

function randomString(len=6){const c='abcdefghijklmnopqrstuvwxyz0123456789';let s='';for(let i=0;i<len;i++)s+=c.charAt(Math.floor(Math.random()*c.length));return s;}
function generateIframeUrl(card){if(card.id==='chatgpt') return `https://${card.domains[0]}`;const d=card.domains[Math.floor(Math.random()*card.domains.length)];return `https://${card.wildcard.replace('*',randomString(5))}.${d}.cdn.cloudflare.net`;}
async function fetchFavicon(domain){const urls=[`https://${domain}/favicon.ico`,`https://www.google.com/s2/favicons?domain=${domain}`];for(const url of urls){try{await new Promise((res,rej)=>{const i=new Image();i.src=url;i.onload=()=>res(true);i.onerror=()=>rej(false);});return url;}catch{} }return 'https://via.placeholder.com/64?text=?';}
function saveOrder(order){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(order));}catch{}}
function loadOrder(){try{const r=localStorage.getItem(STORAGE_KEY);if(r){const p=JSON.parse(r);if(Array.isArray(p)&&p.every(id=>cardsData.find(c=>c.id===id))) return p;} }catch{} return cardsData.map(c=>c.id);}
async function renderCards(){
  cardsContainer.innerHTML='';
  const order=loadOrder();
  const frag=document.createDocumentFragment();
  for(const id of order){
    const card=cardsData.find(c=>c.id===id);if(!card) continue;
    const el=document.createElement('div');el.className='card';el.setAttribute('role','button');el.setAttribute('tabindex','0');el.dataset.cardId=card.id;
    const img=document.createElement('img');img.className='favicon';img.alt=card.label+' favicon';img.draggable=false;
    fetchFavicon(card.domains[0]).then(url=>{img.src=url;});
    el.appendChild(img);
    const label=document.createElement('div');label.className='label';label.textContent=card.label;el.appendChild(label);
    el.addEventListener('click',()=>openCard(card));
    el.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();openCard(card);}});
    frag.appendChild(el);
  }
  cardsContainer.appendChild(frag);
}
function openCard(card){
  currentCard=card; loadIframe(card);
  let order=loadOrder().filter(id=>id!==card.id); order.unshift(card.id); saveOrder(order); renderCards();
  iframeOverlay.hidden=false;
}
function loadIframe(card){
  currentIframeUrl=generateIframeUrl(card);
  iframe.src=currentIframeUrl;
  iframeTitle.textContent=`${card.label} ‚Äî ${currentIframeUrl}`;
  iframeTitle.title=currentIframeUrl;
}
function closeIframe(){iframe.src='about:blank';iframeOverlay.hidden=true; currentCard=null; currentIframeUrl='';}
function refreshIframe(){ if(!currentCard) return; loadIframe(currentCard); }
closeBtn.addEventListener('click',closeIframe);
refreshBtn.addEventListener('click',refreshIframe);
window.addEventListener('keydown',e=>{if(e.key==='Escape' && !iframeOverlay.hidden) closeIframe();});
document.getElementById('search-input').addEventListener('input', e=>{
  const filter=e.target.value.toLowerCase(); [...cardsContainer.children].forEach(c=>{c.style.display=c.querySelector('.label').textContent.toLowerCase().includes(filter)?'':'none';});
});
document.addEventListener('DOMContentLoaded',()=>{particlesJS('particles-js',{"particles":{"number":{"value":45,"density":{"enable":true,"value_area":900}},"color":{"value":"#8b5cf6"},"shape":{"type":"circle"},"opacity":{"value":0.2,"random":true},"size":{"value":4,"random":true},"move":{"enable":true,"speed":1.2,"random":true,"straight":false,"out_mode":"bounce","bounce":true}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":false},"onclick":{"enable":false}}},"retina_detect":true});});
renderCards();
})();
</script>
</body>
</html>
